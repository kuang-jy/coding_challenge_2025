# TODO List 应用

一个基于 Go 后端和 JavaScript 前端的模块化 TODO List Web 应用，采用清晰的分层架构设计。

## 功能特性

### 必须功能
- ✅ 添加待办事项（包含标题，描述可选）
- ✅ 删除待办事项
- ✅ 标记待办事项完成/未完成
- ✅ 查看待办事项列表

### 扩展功能
- ✅ 数据持久化（JSON 文件存储）
- ✅ 任务分类（工作/学习/生活/其他）
- ✅ 任务过滤（按状态和分类）
- ✅ 任务排序（按优先级、截止日期、创建日期）
- ✅ 优先级管理（高/中/低优先级）
- ✅ 截止日期设置
- ✅ 响应式设计
- ✅ 组件化前端架构

## 整体架构说明

### 三层架构设计
```
┌─────────────────┐
│   前端 (Frontend) │  ← 用户界面层
├─────────────────┤
│   后端 (Backend)  │  ← 业务逻辑层
├─────────────────┤
│   数据 (Data)     │  ← 数据持久化层
└─────────────────┘
```

**前端层**：负责用户交互和界面展示
- 组件化设计，职责分离
- 异步 API 调用
- 响应式布局

**后端层**：提供 REST API 服务
- 分层架构：Handler → Service → Model
- 业务逻辑封装
- 跨域支持

**数据层**：JSON 文件持久化
- 轻量级存储方案
- 无数据库依赖
- 自动数据同步

## 项目结构设计

```
todolist/
├── backend/                 # 后端代码
│   ├── main.go             # 程序入口点
│   ├── models/             # 数据模型层
│   │   └── todo.go         # Todo 数据结构定义
│   ├── services/           # 业务逻辑层
│   │   └── todo_service.go # Todo 业务逻辑
│   ├── handlers/           # HTTP 处理层
│   │   └── todo_handler.go # API 路由处理
│   └── utils/              # 工具函数
│       └── cors.go         # CORS 跨域处理
├── frontend/               # 前端代码
│   ├── index.html          # 主页面
│   ├── styles.css          # 样式文件
│   ├── app.js              # 主应用逻辑
│   ├── components/         # UI 组件
│   │   ├── todo-form.js    # 任务表单组件
│   │   ├── todo-list.js    # 任务列表组件
│   │   └── filter-bar.js   # 过滤器组件
│   ├── services/           # 服务层
│   │   └── api.js          # API 调用服务
│   └── utils/              # 工具函数
│       └── dom.js          # DOM 操作工具
├── go.mod                  # Go 模块定义
├── todos.json              # 数据存储文件（运行时生成）
└── README.md               # 项目文档
```

## 模块职责说明

### 后端模块

#### Models 层 (`backend/models/`)
- **职责**：定义数据结构和基本操作
- **todo.go**：Todo 实体定义，包含数据验证和基本方法

#### Services 层 (`backend/services/`)
- **职责**：业务逻辑处理和数据操作
- **todo_service.go**：Todo 的 CRUD 操作，数据持久化管理

#### Handlers 层 (`backend/handlers/`)
- **职责**：HTTP 请求处理和响应
- **todo_handler.go**：REST API 端点实现，请求验证

#### Utils 层 (`backend/utils/`)
- **职责**：通用工具函数
- **cors.go**：跨域资源共享配置

### 前端模块

#### Components 层 (`frontend/components/`)
- **职责**：可复用的 UI 组件
- **todo-form.js**：任务添加表单，处理用户输入
- **todo-list.js**：任务列表展示，支持交互操作
- **filter-bar.js**：过滤器界面，状态管理

#### Services 层 (`frontend/services/`)
- **职责**：与后端 API 通信
- **api.js**：封装所有 HTTP 请求，错误处理

#### Utils 层 (`frontend/utils/`)
- **职责**：通用工具函数
- **dom.js**：DOM 操作辅助函数

#### App 层 (`frontend/app.js`)
- **职责**：应用程序主控制器
- 组件协调和状态管理
- 业务流程控制

## 技术栈

### 后端技术
- **Go 1.21+**：高性能 HTTP 服务器
- **标准库**：net/http, encoding/json
- **架构模式**：分层架构，依赖注入

### 前端技术
- **原生 JavaScript (ES6+)**：无框架依赖
- **模块化设计**：组件化开发
- **CSS3**：响应式设计，现代样式

### 数据存储
- **JSON 文件**：轻量级持久化
- **自动同步**：实时数据保存

## 快速开始

### 环境要求
- Go 1.21 或更高版本
- 现代浏览器（支持 ES6+）

### 启动步骤

1. **克隆项目**
```bash
git clone <repository-url>
cd todolist
```

2. **启动后端服务**
```bash
go run backend/main.go
```

3. **访问应用**
打开浏览器访问：http://localhost:8080

## API 接口文档

### 基础信息
- **Base URL**: `http://localhost:8080/api`
- **Content-Type**: `application/json`
- **CORS**: 支持跨域访问

### 数据结构

#### Todo 对象
```json
{
  "id": 1,
  "title": "任务标题",
  "description": "任务描述",
  "completed": false,
  "category": "工作",
  "priority": "high",
  "due_date": "2024-01-15T00:00:00Z",
  "created_at": "2024-01-01T12:00:00Z"
}
```

#### 创建任务请求
```json
{
  "title": "任务标题",
  "description": "任务描述（可选）",
  "category": "工作",
  "priority": "high",
  "due_date": "2024-01-15"
}
```

### API 接口

#### GET /api/todos
获取所有待办事项，支持排序参数。

**查询参数**:
- `sort`: 排序方式（可选）
  - `priority`: 按优先级排序（高 > 中 > 低）
  - `due_date`: 按截止日期排序（越早越靠前）
  - `created_at`: 按创建日期排序（最新的在前）

**示例**:
```
GET /api/todos?sort=priority
GET /api/todos?sort=due_date
```

## 设计原则

### 1. 单一职责原则
每个模块和组件都有明确的职责边界，便于维护和测试。

### 2. 开放封闭原则
通过接口和抽象，支持功能扩展而无需修改现有代码。

### 3. 依赖倒置原则
高层模块不依赖低层模块，都依赖于抽象接口。

### 4. 最小化原则
保持代码简洁，避免过度设计，专注核心功能实现。

## 新增功能详解

### 优先级管理
- **优先级级别**：高、中、低三个级别
- **视觉区分**：不同优先级使用不同颜色标识
- **排序支持**：可按优先级高低排序

### 截止日期
- **日期选择**：支持日期选择器输入
- **可选设置**：截止日期为可选字段
- **排序支持**：可按截止日期早晚排序

### 排序功能
- **多维度排序**：支持按优先级、截止日期、创建日期排序
- **实时排序**：选择排序方式后立即生效
- **默认排序**：保持原有的默认排序逻辑

## 扩展性考虑

### 后端扩展
- **数据库支持**：可轻松替换为 MySQL/PostgreSQL
- **认证授权**：可添加 JWT 认证中间件
- **缓存层**：可集成 Redis 缓存
- **微服务**：可拆分为独立的微服务
- **复杂排序**：可支持多字段组合排序

### 前端扩展
- **状态管理**：可集成 Redux/Vuex 等状态管理库
- **路由系统**：可添加 SPA 路由支持
- **UI 框架**：可迁移到 React/Vue/Angular
- **PWA 支持**：可添加离线功能

## 性能优化

### 后端优化
- 连接池管理
- 请求限流
- 数据分页
- 缓存策略

### 前端优化
- 组件懒加载
- 虚拟滚动
- 防抖节流
- 资源压缩

## 测试策略

### 后端测试
- 单元测试：各层模块独立测试
- 集成测试：API 接口测试
- 性能测试：并发负载测试

### 前端测试
- 组件测试：UI 组件功能测试
- 集成测试：用户交互流程测试
- E2E 测试：端到端业务流程测试